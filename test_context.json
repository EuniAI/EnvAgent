{
  "max_refined_query_loop": 3,
  "env_implement_file_context_query": "OBJECTIVE: Find the most relevant environment configuration files that can help generate an accurate Dockerfile for this project,\nincluding Dockerfiles, dependency files, build configurations, and environment setup files.\n\n<reasoning>\n1. Analyze project characteristics:\n   - Programming language and framework\n   - Dependency management files\n   - Build system and tools\n   - Runtime requirements\n   - Environment configurations\n\n2. Search requirements:\n   - Existing Dockerfiles or containerization files\n   - Dependency files (requirements.txt, package.json, pom.xml, etc.)\n   - Build configuration files (Makefile, CMakeLists.txt, etc.)\n   - Environment configuration files (.env, config files)\n   - Setup and installation scripts\n\n3. Focus areas:\n   - Docker-related files (Dockerfile, docker-compose.yml, .dockerignore)\n   - Package management files (requirements.txt, package.json, go.mod, Cargo.toml, etc.)\n   - Build system files (Makefile, CMakeLists.txt, build.gradle, etc.)\n   - Environment configuration (.env, config.json, application.properties, etc.)\n   - Setup documentation (README.md, INSTALL.md, SETUP.md)\n   - CI/CD configuration files\n</reasoning>\n\nREQUIREMENTS:\n- Return the most relevant environment configuration files for Dockerfile generation\n- Must include complete file content with exact file paths and line numbers\n- Must include dependency files, build configurations, and environment setups\n- Must include any existing Docker-related files\n- Must include setup documentation and installation instructions\n\n<examples>\n<example id=\"python-web-app\">\n<project_context>\nPython Flask web application with requirements.txt\n</project_context>\n\n<ideal_files>\n# File: requirements.txt\nFlask==2.3.3\ngunicorn==21.2.0\npsycopg2-binary==2.9.7\nredis==4.6.0\n\n# File: app.py\nfrom flask import Flask\napp = Flask(__name__)\n\n@app.route('/')\ndef hello():\n    return 'Hello World!'\n\nif __name__ == '__main__':\n    app.run(host='0.0.0.0', port=5000)\n\n# File: README.md\n## Installation\npip install -r requirements.txt\npython app.py\n</ideal_files>\n</example>\n\n<example id=\"nodejs-api\">\n<project_context>\nNode.js Express API with package.json\n</project_context>\n\n<ideal_files>\n# File: package.json\n{\n  \"name\": \"my-api\",\n  \"version\": \"1.0.0\",\n  \"scripts\": {\n    \"start\": \"node server.js\",\n    \"dev\": \"nodemon server.js\"\n  },\n  \"dependencies\": {\n    \"express\": \"^4.18.2\",\n    \"mongoose\": \"^7.5.0\"\n  }\n}\n\n# File: server.js\nconst express = require('express');\nconst app = express();\nconst PORT = process.env.PORT || 3000;\n\napp.get('/', (req, res) => {\n  res.json({ message: 'API is running' });\n});\n\napp.listen(PORT, () => {\n  console.log(`Server running on port ${PORT}`);\n});\n</ideal_files>\n</example>\n\nSearch priority:\n1. Existing Dockerfiles or containerization files\n2. Dependency management files (requirements.txt, package.json, etc.)\n3. Build configuration files (Makefile, CMakeLists.txt, etc.)\n4. Environment configuration files (.env, config files)\n5. Setup documentation and installation instructions\n\nFind the most relevant environment configuration files with complete context for Dockerfile generation.\n",
  "env_implement_file_context": [
    {
      "relative_path": ".github/workflows/ci-lint-test.yml",
      "content": "13.         python: [\"3.10\"]\n14.     steps:\n15.       - name: \"[INIT] Checkout repository\"\n16.         uses: actions/checkout@v3\n17.       - name: \"[INIT] Install Python ${{ matrix.python }}\"\n18.         uses: actions/setup-python@v4\n19.         with:\n20.           python-version: ${{ matrix.python }}\n21.       - name: \"[INIT] Install Poetry\"\n22.         uses: snok/install-poetry@v1.3\n23.       - name: \"[INIT] Restore dependency cache\"\n24.         id: cache-restore\n25.         uses: actions/cache@v3\n26.         with:\n27.           path: |\n28.             ~/.cache/pip\n29.             ~/.cache/pypoetry\n30.           key: ${{ runner.os }}-py${{ matrix.python }}-${{ hashFiles('**/poetry.lock') }}\n31.       - name: \"[INIT] Install dependencies\"\n32.         if: ${{ !steps.cache-restore.outputs.cache-hit }}\n33.         run: pip install poetry && poetry install\n34.       - name: \"[EXEC] Lint\"\n35.         run: ./utils ci lint",
      "start_line_number": 13,
      "end_line_number": 35
    },
    {
      "relative_path": ".github/workflows/ci-lint-test.yml",
      "content": "45.         python: [\"3.8\", \"3.9\", \"3.10\", \"pypy3.9\", \"pypy3.10\"]\n46.         os: [ubuntu-22.04, macos-12, windows-2022]\n47.     steps:\n48.       - name: \"[INIT] Checkout repository\"\n49.         uses: actions/checkout@v3\n50.       - name: \"[INIT] Install Python ${{ matrix.python }}\"\n51.         uses: actions/setup-python@v4\n52.         with:\n53.           python-version: ${{ matrix.python }}\n54.       - name: \"[INIT] Install Poetry\"\n55.         uses: snok/install-poetry@v1.3\n56.       - name: \"[INIT] Restore dependency cache\"\n57.         id: cache-restore\n58.         uses: actions/cache@v3\n59.         with:\n60.           path: |\n61.             ~/.cache/pip\n62.             ~/.cache/pypoetry\n63.           key: ${{ runner.os }}-py${{ matrix.python }}-${{ hashFiles('**/poetry.lock') }}\n64.       - name: \"[INIT] Install dependencies\"\n65.         if: ${{ !steps.cache-restore.outputs.cache-hit }}\n66.         run: pip install poetry && poetry install",
      "start_line_number": 45,
      "end_line_number": 66
    },
    {
      "relative_path": ".github/workflows/cd-pypi.yml",
      "content": "14.         python: [3.9]\n15.     steps:\n16.       - name: \"[INIT] Checkout repository\"\n17.         uses: actions/checkout@v2\n18.       - name: \"[INIT] Install Python ${{ matrix.python }}\"\n19.         uses: actions/setup-python@v2\n20.         with:\n21.           python-version: ${{ matrix.python }}\n22.       - name: \"[INIT] Install Poetry\"\n23.         uses: snok/install-poetry@v1.3\n24.       - name: \"[INIT] Restore dependency cache\"\n25.         id: cache-restore\n26.         uses: actions/cache@v2\n27.         with:\n28.           path: |\n29.             ~/.cache/pip\n30.             ~/.cache/pypoetry\n31.           key: ${{ runner.os }}-py${{ matrix.python }}-${{ hashFiles('**/poetry.lock') }}\n32.       - name: \"[INIT] Install dependencies\"\n33.         if: ${{ !steps.cache-restore.outputs.cache-hit }}\n34.         run: pip install poetry && poetry install\n35.       - name: \"[EXEC] Build\"\n36.         run: poetry build\n37.       - name: \"[EXEC] Publish to PyPI\"\n38.         run: poetry run twine upload dist/*",
      "start_line_number": 14,
      "end_line_number": 38
    },
    {
      "relative_path": ".github/workflows/cd-site.yml",
      "content": "14.         python: [3.9]\n15.         ruby: [3.0.0]\n16.     steps:\n17.       - name: \"[INIT] Checkout repository\"\n18.         uses: actions/checkout@v2\n19.       - name: \"[INIT] Install Python ${{ matrix.python }}\"\n20.         uses: actions/setup-python@v2\n21.         with:\n22.           python-version: ${{ matrix.python }}\n23.       - name: \"[INIT] Install Ruby ${{ matrix.ruby }}\"\n24.         uses: ruby/setup-ruby@v1.95.0\n25.         with:\n26.           ruby-version: ${{ matrix.ruby }}\n27.           bundler-cache: true\n28.       - name: \"[EXEC] Insert demo\"\n29.         run: python scripts/insert_demo.py\n30.       - name: \"[EXEC] Build site\"\n31.         run: cd site && ~/.gem/ruby/${{ matrix.ruby }}/jekyll build",
      "start_line_number": 14,
      "end_line_number": 31
    },
    {
      "relative_path": ".pre-commit-hooks.yaml",
      "content": "1. - id: proselint\n2.   name: A linter for prose\n3.   description: This hook checks language usage and style in text files.\n4.   entry: proselint\n5.   language: python\n6.   types: [text]",
      "start_line_number": 1,
      "end_line_number": 6
    },
    {
      "relative_path": "proselint/__main__.py",
      "content": "7. from .command_line import proselint\n8. \n9. if __name__ == '__main__':\n10.     proselint()",
      "start_line_number": 7,
      "end_line_number": 10
    },
    {
      "relative_path": "proselint/command_line.py",
      "content": "89. @click.command(context_settings=CONTEXT_SETTINGS)\n90. @click.version_option(__version__, '--version', '-v', message='%(version)s')\n91. @click.option('--config', is_flag=False, type=click.Path(),\n92.               help=\"Path to configuration file.\")\n93. @click.option('--debug', '-d', is_flag=True, help=\"Give verbose output.\")\n94. @click.option('--clean', '-c', is_flag=True, help=\"Clear the cache.\")\n95. @click.option('--json', '-j', 'output_json', is_flag=True,\n96.               help=\"Output as JSON.\")\n97. @click.option('--time', '-t', is_flag=True, help=\"Time on a corpus.\")\n98. @click.option('--demo', is_flag=True, help=\"Run over demo file.\")\n99. @click.option('--compact', is_flag=True, help=\"Shorten output.\")\n100. @click.option('--dump-config', is_flag=True, help=\"Prints current config.\")\n101. @click.option('--dump-default-config', is_flag=True,\n102.               help=\"Prints default config.\")\n103. @click.argument('paths', nargs=-1, type=click.Path())\n104. @close_cache_shelves_after\n105. def proselint(paths=None, config=None, version=None, clean=None,\n106.               debug=None, output_json=None, time=None, demo=None, compact=None,\n107.               dump_config=None, dump_default_config=None):",
      "start_line_number": 89,
      "end_line_number": 107
    },
    {
      "relative_path": "proselint/tools.py",
      "content": "49. def _get_xdg_config_home():\n50.     return _get_xdg_path('XDG_CONFIG_HOME', os.path.join(home_dir, '.config'))\n51. \n52. \n53. def _get_xdg_cache_home():\n54.     return _get_xdg_path('XDG_CACHE_HOME', os.path.join(home_dir, '.cache'))\n55. ",
      "start_line_number": 49,
      "end_line_number": 55
    },
    {
      "relative_path": "proselint/tools.py",
      "content": "168. def load_options(config_file_path=None, conf_default=None):\n169.     \"\"\"Read various proselintrc files, allowing user overrides.\"\"\"\n170.     conf_default = conf_default or {}\n171.     if os.path.isfile(\"/etc/proselintrc\"):\n172.         conf_default = json.load(open(\"/etc/proselintrc\"))\n173. \n174.     user_config_paths = [\n175.         os.path.join(cwd, '.proselintrc.json'),\n176.         os.path.join(_get_xdg_config_home(), 'proselint', 'config.json'),\n177.         os.path.join(home_dir, '.proselintrc.json')\n178.     ]\n179. \n180.     if config_file_path:\n181.         if not os.path.isfile(config_file_path):\n182.             raise FileNotFoundError(\n183.                 f\"Config file {config_file_path} does not exist\")\n184.         user_config_paths.insert(0, config_file_path)\n185. \n186.     user_options = {}\n187.     for path in user_config_paths:\n188.         if os.path.isfile(path):\n189.             user_options = json.load(open(path))\n190.             break\n191.         oldpath = path.replace(\".json\", \"\")\n192.         if os.path.isfile(oldpath):\n193.             warn(f\"{oldpath} was found instead of a JSON file.\"\n194.                  f\" Rename to {path}.\", DeprecationWarning, \"\", 0)\n195.             user_options = json.load(open(oldpath))\n196.             break\n197. \n198.     return deepmerge_dicts(conf_default, user_options)\n199. ",
      "start_line_number": 168,
      "end_line_number": 199
    },
    {
      "relative_path": "site/s3_website.yml",
      "content": "1. s3_id: <%= ENV['AWS_S3_ID'] %>\n2. s3_secret: <%= ENV['AWS_S3_SECRET'] %>\n3. s3_bucket: proselint.com\n4. \n5. gzip: true",
      "start_line_number": 1,
      "end_line_number": 5
    },
    {
      "relative_path": "CONTRIBUTING.md",
      "content": "1. A guide to how you can contribute to proselint can be found on [our website].\n2. \n3. Work on proselint happens over at [our GitHub]. To contribute, create a new\n4. branch off main and then open a pull request. Your code should run cleanly\n5. through `pycodestyle` and `pydocstyle` linters (pro tip \\- outside of CI,\n6. use `pycodestyle --config=pyproject.toml && pydocstyle -se` for more\n7. descriptive information on what's causing your lint failures). Comments,",
      "start_line_number": 1,
      "end_line_number": 7
    },
    {
      "relative_path": "site/README.md",
      "content": "5. If you don't have Jekyll already installed, you will need to go ahead and do that.\n6. \n7. ```\n8. $ gem install jekyll\n9. ```\n10. \n11. #### Verify your Jekyll version\n12. \n13. It's important to also check your version of Jekyll since this project uses Native Sass which\n14. is [only supported by 2.0+](http://jekyllrb.com/news/2014/05/06/jekyll-turns-2-0-0/).\n15. \n16. ```\n17. $ jekyll -v",
      "start_line_number": 5,
      "end_line_number": 17
    },
    {
      "relative_path": "site/_config.yml",
      "content": "32. # Build settings\n33. markdown:     redcarpet\n34. permalink:    /:title/\n35. paginate:     3\n36. sass:\n37.   compressed: true\n38. gems:\n39.   - jekyll-sitemap\n40. redcarpet:\n41.   extensions: ['tables']",
      "start_line_number": 32,
      "end_line_number": 41
    },
    {
      "relative_path": "README.md",
      "content": "23. [pip]: https://packaging.python.org/installing/#use-pip-for-installing\n24. \n25. #### Fedora\n26. \n27. ```bash\n28. sudo dnf install proselint\n29. ```\n30. \n31. #### Debian\n32. \n33. ```bash\n34. sudo apt install python3-proselint\n35. ```\n36. \n37. #### Ubuntu\n38. \n39. ```bash\n40. sudo add-apt-repository universe\n41. sudo apt install python3-proselint\n42. ```\n43. \n44. ### Plugins for other software\n45. \n46. `proselint` is available on:\n47. \n48. - A [demo editor](http://proselint.com/write)\n49. - [Sublime Text](https://github.com/amperser/proselint/tree/main/plugins/sublime/SublimeLinter-contrib-proselint)\n50. - [Atom Editor](https://github.com/smockle/linter-proselint) (thanks to [Clay Miller](https://github.com/smockle)).\n51. - Emacs via [Flycheck](http://www.flycheck.org/) or via [Flymake](https://sr.ht/~manuel-uberti/flymake-proselint/)\n52. - Vim via [ALE](https://github.com/w0rp/ale) or [Syntastic](https://github.com/vim-syntastic/syntastic) (thanks to @lcd047, @Carreau, and [Daniel M. Capella](https://github.com/polyzen))\n53. - Neovim via [null-ls](https://github.com/jose-elias-alvarez/null-ls.nvim) (null-ls has [diagnostics](https://github.com/jose-elias-alvarez/null-ls.nvim/blob/main/lua/null-ls/builtins/diagnostics/proselint.lua) and [code actions](https://github.com/jose-elias-alvarez/null-ls.nvim/blob/main/lua/null-ls/builtins/code_actions/proselint.lua) for proselint)\n54. - [Phabricator's `arc` CLI](https://github.com/google/arc-proselint) (thanks to [Jeff Verkoeyen](https://github.com/jverkoey))\n55. - [Danger](https://github.com/dbgrandi/danger-prose) (thanks to [David Grandinetti](https://github.com/dbgrandi) and [Orta Therox](https://github.com/orta))\n56. - [Visual Studio Code](https://github.com/ppeszko/vscode-proselint) (thanks to [Patryk Peszko](https://github.com/ppeszko))\n57. - [coala](https://github.com/coala-analyzer/bear-docs/blob/master/docs/ProseLintBear.rst) (thanks to the [coala Development Group](https://github.com/coala-analyzer))\n58. - [IntelliJ](https://github.com/kropp/intellij-proselint) (by [Victor Kropp](https://github.com/kropp))\n59. - [pre-commit](https://pre-commit.com/) (by [Andy Airey](https://github.com/aairey))\n60. - [Statick](https://github.com/sscpac/statick-md)\n61. - [MegaLinter](https://oxsecurity.github.io/megalinter/latest/descriptors/spell_proselint/)\n62. \n63. ### Usage\n64. \n65. Suppose you have a document `text.md` with the following text:\n66. \n67. ```",
      "start_line_number": 23,
      "end_line_number": 67
    },
    {
      "relative_path": "README.md",
      "content": "117.   // length from start -> end\n118.   extent: 11,\n119. \n120.   // How important is this? Can be \"suggestion\", \"warning\", or \"error\".\n121.   severity: \"warning\",\n122. \n123.   // Possible replacements.\n124.   replacements: [\n125.     {\n126.       value: \"unique\"\n127.     }\n128.   ]\n129. }\n130. ```\n131. \n132. To run the linter as part of another Python program, you can use the `lint` function in `proselint.tools`:\n133. \n134. ```python\n135. import proselint\n136. \n137. suggestions = proselint.tools.lint(\"This sentence is very unique\")\n138. ```\n139. \n140. This will return a list of suggestions:\n141. \n142. ```python\n143. [('weasel_words.very', \"Substitute 'damn' every time you're inclined to write 'very;' your editor will delete it and the writing will be just as it should be.\", 0, 17, 17, 22, 5, 'warning', None), ('uncomparables.misc', \"Comparison of an uncomparable: 'very unique.' is not comparable.\", 0, 17, 17, 29, 12, 'warning', None)]\n144. ```\n145. \n146. ### Checks\n147. \n148. You can disable any of the checks by modifying `$XDG_CONFIG_HOME/proselint/config.json`.\n149. If `$XDG_CONFIG_HOME` is not set or empty, `~/.config/proselint/config.json` will be used.\n150. Additionally, for compatibility reasons, the legacy configurations `~/.proselintrc` and `$XDG_CONFIG_HOME/proselint/config` will be checked if `$XDG_CONFIG_HOME/proselint/config.json` does not exist.\n151. \n152. ```json\n153. {\n154.   \"checks\": {\n155.     \"typography.diacritical_marks\": false\n156.   }\n157. }\n158. ```",
      "start_line_number": 117,
      "end_line_number": 158
    }
  ],
  "env_implement_write_messages": [
    {
      "content": "Project Environment Context:\nFile: .github/workflows/ci-lint-test.yml\nLine number range: 13 - 35\nContent:\n13.         python: [\"3.10\"]\n14.     steps:\n15.       - name: \"[INIT] Checkout repository\"\n16.         uses: actions/checkout@v3\n17.       - name: \"[INIT] Install Python ${{ matrix.python }}\"\n18.         uses: actions/setup-python@v4\n19.         with:\n20.           python-version: ${{ matrix.python }}\n21.       - name: \"[INIT] Install Poetry\"\n22.         uses: snok/install-poetry@v1.3\n23.       - name: \"[INIT] Restore dependency cache\"\n24.         id: cache-restore\n25.         uses: actions/cache@v3\n26.         with:\n27.           path: |\n28.             ~/.cache/pip\n29.             ~/.cache/pypoetry\n30.           key: ${{ runner.os }}-py${{ matrix.python }}-${{ hashFiles('**/poetry.lock') }}\n31.       - name: \"[INIT] Install dependencies\"\n32.         if: ${{ !steps.cache-restore.outputs.cache-hit }}\n33.         run: pip install poetry && poetry install\n34.       - name: \"[EXEC] Lint\"\n35.         run: ./utils ci lint\n\n\nFile: .github/workflows/ci-lint-test.yml\nLine number range: 45 - 66\nContent:\n45.         python: [\"3.8\", \"3.9\", \"3.10\", \"pypy3.9\", \"pypy3.10\"]\n46.         os: [ubuntu-22.04, macos-12, windows-2022]\n47.     steps:\n48.       - name: \"[INIT] Checkout repository\"\n49.         uses: actions/checkout@v3\n50.       - name: \"[INIT] Install Python ${{ matrix.python }}\"\n51.         uses: actions/setup-python@v4\n52.         with:\n53.           python-version: ${{ matrix.python }}\n54.       - name: \"[INIT] Install Poetry\"\n55.         uses: snok/install-poetry@v1.3\n56.       - name: \"[INIT] Restore dependency cache\"\n57.         id: cache-restore\n58.         uses: actions/cache@v3\n59.         with:\n60.           path: |\n61.             ~/.cache/pip\n62.             ~/.cache/pypoetry\n63.           key: ${{ runner.os }}-py${{ matrix.python }}-${{ hashFiles('**/poetry.lock') }}\n64.       - name: \"[INIT] Install dependencies\"\n65.         if: ${{ !steps.cache-restore.outputs.cache-hit }}\n66.         run: pip install poetry && poetry install\n\n\nFile: .github/workflows/cd-pypi.yml\nLine number range: 14 - 38\nContent:\n14.         python: [3.9]\n15.     steps:\n16.       - name: \"[INIT] Checkout repository\"\n17.         uses: actions/checkout@v2\n18.       - name: \"[INIT] Install Python ${{ matrix.python }}\"\n19.         uses: actions/setup-python@v2\n20.         with:\n21.           python-version: ${{ matrix.python }}\n22.       - name: \"[INIT] Install Poetry\"\n23.         uses: snok/install-poetry@v1.3\n24.       - name: \"[INIT] Restore dependency cache\"\n25.         id: cache-restore\n26.         uses: actions/cache@v2\n27.         with:\n28.           path: |\n29.             ~/.cache/pip\n30.             ~/.cache/pypoetry\n31.           key: ${{ runner.os }}-py${{ matrix.python }}-${{ hashFiles('**/poetry.lock') }}\n32.       - name: \"[INIT] Install dependencies\"\n33.         if: ${{ !steps.cache-restore.outputs.cache-hit }}\n34.         run: pip install poetry && poetry install\n35.       - name: \"[EXEC] Build\"\n36.         run: poetry build\n37.       - name: \"[EXEC] Publish to PyPI\"\n38.         run: poetry run twine upload dist/*\n\n\nFile: .github/workflows/cd-site.yml\nLine number range: 14 - 31\nContent:\n14.         python: [3.9]\n15.         ruby: [3.0.0]\n16.     steps:\n17.       - name: \"[INIT] Checkout repository\"\n18.         uses: actions/checkout@v2\n19.       - name: \"[INIT] Install Python ${{ matrix.python }}\"\n20.         uses: actions/setup-python@v2\n21.         with:\n22.           python-version: ${{ matrix.python }}\n23.       - name: \"[INIT] Install Ruby ${{ matrix.ruby }}\"\n24.         uses: ruby/setup-ruby@v1.95.0\n25.         with:\n26.           ruby-version: ${{ matrix.ruby }}\n27.           bundler-cache: true\n28.       - name: \"[EXEC] Insert demo\"\n29.         run: python scripts/insert_demo.py\n30.       - name: \"[EXEC] Build site\"\n31.         run: cd site && ~/.gem/ruby/${{ matrix.ruby }}/jekyll build\n\n\nFile: .pre-commit-hooks.yaml\nLine number range: 1 - 6\nContent:\n1. - id: proselint\n2.   name: A linter for prose\n3.   description: This hook checks language usage and style in text files.\n4.   entry: proselint\n5.   language: python\n6.   types: [text]\n\n\nFile: proselint/__main__.py\nLine number range: 7 - 10\nContent:\n7. from .command_line import proselint\n8. \n9. if __name__ == '__main__':\n10.     proselint()\n\n\nFile: proselint/command_line.py\nLine number range: 89 - 107\nContent:\n89. @click.command(context_settings=CONTEXT_SETTINGS)\n90. @click.version_option(__version__, '--version', '-v', message='%(version)s')\n91. @click.option('--config', is_flag=False, type=click.Path(),\n92.               help=\"Path to configuration file.\")\n93. @click.option('--debug', '-d', is_flag=True, help=\"Give verbose output.\")\n94. @click.option('--clean', '-c', is_flag=True, help=\"Clear the cache.\")\n95. @click.option('--json', '-j', 'output_json', is_flag=True,\n96.               help=\"Output as JSON.\")\n97. @click.option('--time', '-t', is_flag=True, help=\"Time on a corpus.\")\n98. @click.option('--demo', is_flag=True, help=\"Run over demo file.\")\n99. @click.option('--compact', is_flag=True, help=\"Shorten output.\")\n100. @click.option('--dump-config', is_flag=True, help=\"Prints current config.\")\n101. @click.option('--dump-default-config', is_flag=True,\n102.               help=\"Prints default config.\")\n103. @click.argument('paths', nargs=-1, type=click.Path())\n104. @close_cache_shelves_after\n105. def proselint(paths=None, config=None, version=None, clean=None,\n106.               debug=None, output_json=None, time=None, demo=None, compact=None,\n107.               dump_config=None, dump_default_config=None):\n\n\nFile: proselint/tools.py\nLine number range: 49 - 55\nContent:\n49. def _get_xdg_config_home():\n50.     return _get_xdg_path('XDG_CONFIG_HOME', os.path.join(home_dir, '.config'))\n51. \n52. \n53. def _get_xdg_cache_home():\n54.     return _get_xdg_path('XDG_CACHE_HOME', os.path.join(home_dir, '.cache'))\n55. \n\n\nFile: proselint/tools.py\nLine number range: 168 - 199\nContent:\n168. def load_options(config_file_path=None, conf_default=None):\n169.     \"\"\"Read various proselintrc files, allowing user overrides.\"\"\"\n170.     conf_default = conf_default or {}\n171.     if os.path.isfile(\"/etc/proselintrc\"):\n172.         conf_default = json.load(open(\"/etc/proselintrc\"))\n173. \n174.     user_config_paths = [\n175.         os.path.join(cwd, '.proselintrc.json'),\n176.         os.path.join(_get_xdg_config_home(), 'proselint', 'config.json'),\n177.         os.path.join(home_dir, '.proselintrc.json')\n178.     ]\n179. \n180.     if config_file_path:\n181.         if not os.path.isfile(config_file_path):\n182.             raise FileNotFoundError(\n183.                 f\"Config file {config_file_path} does not exist\")\n184.         user_config_paths.insert(0, config_file_path)\n185. \n186.     user_options = {}\n187.     for path in user_config_paths:\n188.         if os.path.isfile(path):\n189.             user_options = json.load(open(path))\n190.             break\n191.         oldpath = path.replace(\".json\", \"\")\n192.         if os.path.isfile(oldpath):\n193.             warn(f\"{oldpath} was found instead of a JSON file.\"\n194.                  f\" Rename to {path}.\", DeprecationWarning, \"\", 0)\n195.             user_options = json.load(open(oldpath))\n196.             break\n197. \n198.     return deepmerge_dicts(conf_default, user_options)\n199. \n\n\nFile: site/s3_website.yml\nLine number range: 1 - 5\nContent:\n1. s3_id: <%= ENV['AWS_S3_ID'] %>\n2. s3_secret: <%= ENV['AWS_S3_SECRET'] %>\n3. s3_bucket: proselint.com\n4. \n5. gzip: true\n\n\nFile: CONTRIBUTING.md\nLine number range: 1 - 7\nContent:\n1. A guide to how you can contribute to proselint can be found on [our website].\n2. \n3. Work on proselint happens over at [our GitHub]. To contribute, create a new\n4. branch off main and then open a pull request. Your code should run cleanly\n5. through `pycodestyle` and `pydocstyle` linters (pro tip \\- outside of CI,\n6. use `pycodestyle --config=pyproject.toml && pydocstyle -se` for more\n7. descriptive information on what's causing your lint failures). Comments,\n\n\nFile: site/README.md\nLine number range: 5 - 17\nContent:\n5. If you don't have Jekyll already installed, you will need to go ahead and do that.\n6. \n7. ```\n8. $ gem install jekyll\n9. ```\n10. \n11. #### Verify your Jekyll version\n12. \n13. It's important to also check your version of Jekyll since this project uses Native Sass which\n14. is [only supported by 2.0+](http://jekyllrb.com/news/2014/05/06/jekyll-turns-2-0-0/).\n15. \n16. ```\n17. $ jekyll -v\n\n\nFile: site/_config.yml\nLine number range: 32 - 41\nContent:\n32. # Build settings\n33. markdown:     redcarpet\n34. permalink:    /:title/\n35. paginate:     3\n36. sass:\n37.   compressed: true\n38. gems:\n39.   - jekyll-sitemap\n40. redcarpet:\n41.   extensions: ['tables']\n\n\nFile: README.md\nLine number range: 23 - 67\nContent:\n23. [pip]: https://packaging.python.org/installing/#use-pip-for-installing\n24. \n25. #### Fedora\n26. \n27. ```bash\n28. sudo dnf install proselint\n29. ```\n30. \n31. #### Debian\n32. \n33. ```bash\n34. sudo apt install python3-proselint\n35. ```\n36. \n37. #### Ubuntu\n38. \n39. ```bash\n40. sudo add-apt-repository universe\n41. sudo apt install python3-proselint\n42. ```\n43. \n44. ### Plugins for other software\n45. \n46. `proselint` is available on:\n47. \n48. - A [demo editor](http://proselint.com/write)\n49. - [Sublime Text](https://github.com/amperser/proselint/tree/main/plugins/sublime/SublimeLinter-contrib-proselint)\n50. - [Atom Editor](https://github.com/smockle/linter-proselint) (thanks to [Clay Miller](https://github.com/smockle)).\n51. - Emacs via [Flycheck](http://www.flycheck.org/) or via [Flymake](https://sr.ht/~manuel-uberti/flymake-proselint/)\n52. - Vim via [ALE](https://github.com/w0rp/ale) or [Syntastic](https://github.com/vim-syntastic/syntastic) (thanks to @lcd047, @Carreau, and [Daniel M. Capella](https://github.com/polyzen))\n53. - Neovim via [null-ls](https://github.com/jose-elias-alvarez/null-ls.nvim) (null-ls has [diagnostics](https://github.com/jose-elias-alvarez/null-ls.nvim/blob/main/lua/null-ls/builtins/diagnostics/proselint.lua) and [code actions](https://github.com/jose-elias-alvarez/null-ls.nvim/blob/main/lua/null-ls/builtins/code_actions/proselint.lua) for proselint)\n54. - [Phabricator's `arc` CLI](https://github.com/google/arc-proselint) (thanks to [Jeff Verkoeyen](https://github.com/jverkoey))\n55. - [Danger](https://github.com/dbgrandi/danger-prose) (thanks to [David Grandinetti](https://github.com/dbgrandi) and [Orta Therox](https://github.com/orta))\n56. - [Visual Studio Code](https://github.com/ppeszko/vscode-proselint) (thanks to [Patryk Peszko](https://github.com/ppeszko))\n57. - [coala](https://github.com/coala-analyzer/bear-docs/blob/master/docs/ProseLintBear.rst) (thanks to the [coala Development Group](https://github.com/coala-analyzer))\n58. - [IntelliJ](https://github.com/kropp/intellij-proselint) (by [Victor Kropp](https://github.com/kropp))\n59. - [pre-commit](https://pre-commit.com/) (by [Andy Airey](https://github.com/aairey))\n60. - [Statick](https://github.com/sscpac/statick-md)\n61. - [MegaLinter](https://oxsecurity.github.io/megalinter/latest/descriptors/spell_proselint/)\n62. \n63. ### Usage\n64. \n65. Suppose you have a document `text.md` with the following text:\n66. \n67. ```\n\n\nFile: README.md\nLine number range: 117 - 158\nContent:\n117.   // length from start -> end\n118.   extent: 11,\n119. \n120.   // How important is this? Can be \"suggestion\", \"warning\", or \"error\".\n121.   severity: \"warning\",\n122. \n123.   // Possible replacements.\n124.   replacements: [\n125.     {\n126.       value: \"unique\"\n127.     }\n128.   ]\n129. }\n130. ```\n131. \n132. To run the linter as part of another Python program, you can use the `lint` function in `proselint.tools`:\n133. \n134. ```python\n135. import proselint\n136. \n137. suggestions = proselint.tools.lint(\"This sentence is very unique\")\n138. ```\n139. \n140. This will return a list of suggestions:\n141. \n142. ```python\n143. [('weasel_words.very', \"Substitute 'damn' every time you're inclined to write 'very;' your editor will delete it and the writing will be just as it should be.\", 0, 17, 17, 22, 5, 'warning', None), ('uncomparables.misc', \"Comparison of an uncomparable: 'very unique.' is not comparable.\", 0, 17, 17, 29, 12, 'warning', None)]\n144. ```\n145. \n146. ### Checks\n147. \n148. You can disable any of the checks by modifying `$XDG_CONFIG_HOME/proselint/config.json`.\n149. If `$XDG_CONFIG_HOME` is not set or empty, `~/.config/proselint/config.json` will be used.\n150. Additionally, for compatibility reasons, the legacy configurations `~/.proselintrc` and `$XDG_CONFIG_HOME/proselint/config` will be checked if `$XDG_CONFIG_HOME/proselint/config.json` does not exist.\n151. \n152. ```json\n153. {\n154.   \"checks\": {\n155.     \"typography.diacritical_marks\": false\n156.   }\n157. }\n158. ```\n\n\n\nNow generate a complete executable bash script that can successfully set up and configure the environment for this project, especially designed to run inside Docker containers. The bash script should:\n1. Install the appropriate runtime and dependencies for the project's technology stack\n2. Install all necessary system packages and tools\n3. Set up the project directory structure and permissions\n4. Configure the runtime environment properly\n5. Set up necessary environment variables and configurations\n6. Follow bash scripting best practices for error handling and security\n\nMake sure the bash script is self-contained and can set up the project environment from scratch in a Docker container environment.\n",
      "additional_kwargs": {},
      "response_metadata": {},
      "type": "human",
      "name": null,
      "id": "4e36fe7c-282b-497b-9d98-56fa7999a276",
      "example": false
    },
    {
      "content": "#!/bin/bash\n# Proselint project environment setup script for Docker containers\n# - Installs system packages for Python and optional Ruby/Jekyll site build\n# - Installs Poetry and project dependencies\n# - Configures XDG config/cache for proselint\n# - Idempotent and safe to re-run\n# - No sudo required; designed for root inside Docker\n\nset -Eeuo pipefail\n\n# Globals\nAPP_NAME=\"proselint\"\nAPP_HOME=\"${APP_HOME:-$(pwd)}\"\nLOG_TAG=\"[setup:${APP_NAME}]\"\nPOETRY_VERSION_MIN=\"1.5.0\" # minimum reasonable version\nPYTHON_MIN=\"3.8\"\nENABLE_SITE=\"${ENABLE_SITE:-0}\" # set to 1 to install Ruby/Jekyll site tooling\nXDG_CONFIG_HOME=\"${XDG_CONFIG_HOME:-$HOME/.config}\"\nXDG_CACHE_HOME=\"${XDG_CACHE_HOME:-$HOME/.cache}\"\nDEBIAN_FRONTEND=\"noninteractive\"\nPIP_DISABLE_PIP_VERSION_CHECK=\"1\"\nPIP_ROOT_USER_ACTION=\"ignore\"\nexport XDG_CONFIG_HOME XDG_CACHE_HOME DEBIAN_FRONTEND PIP_DISABLE_PIP_VERSION_CHECK PIP_ROOT_USER_ACTION\n\n# Colors (simple, safe)\nGREEN=$(printf '\\033[0;32m')\nYELLOW=$(printf '\\033[1;33m')\nRED=$(printf '\\033[0;31m')\nNC=$(printf '\\033[0m')\n\nlog() { echo -e \"${GREEN}${LOG_TAG} $(date +'%Y-%m-%d %H:%M:%S') - $*${NC}\"; }\nwarn() { echo -e \"${YELLOW}${LOG_TAG} WARNING - $*${NC}\" >&2; }\nerror() { echo -e \"${RED}${LOG_TAG} ERROR - $*${NC}\" >&2; }\n\ncleanup() {\n  if [[ \"${1-}\" != \"0\" ]]; then\n    error \"Setup did not complete successfully.\"\n  fi\n}\ntrap 'cleanup $?' EXIT\n\nrequire_cmd() {\n  if ! command -v \"$1\" >/dev/null 2>&1; then\n    error \"Required command not found: $1\"\n    return 1\n  fi\n}\n\n# Detect package manager (apt or apk)\ndetect_pkg_manager() {\n  if command -v apt-get >/dev/null 2>&1; then\n    echo \"apt\"\n  elif command -v apk >/dev/null 2>&1; then\n    echo \"apk\"\n  else\n    echo \"unknown\"\n  fi\n}\n\n# Install core system dependencies\ninstall_system_deps() {\n  local pm; pm=\"$(detect_pkg_manager)\"\n\n  log \"Installing system packages via package manager: $pm\"\n\n  if [[ \"$pm\" == \"apt\" ]]; then\n    apt-get update -y\n    # Base tools and build essentials\n    apt-get install -y --no-install-recommends \\\n      ca-certificates curl wget git build-essential \\\n      python3 python3-venv python3-pip python3-distutils \\\n      libffi-dev libssl-dev zlib1g-dev\n\n    # Ensure ca-certificates are up to date\n    update-ca-certificates || true\n\n  elif [[ \"$pm\" == \"apk\" ]]; then\n    apk update\n    apk add --no-cache \\\n      ca-certificates curl wget git \\\n      build-base python3 py3-pip py3-virtualenv \\\n      libffi-dev openssl-dev zlib-dev\n    update-ca-certificates || true\n  else\n    warn \"Unknown package manager. Assuming Python and build tools are preinstalled.\"\n  fi\n\n  log \"System packages installation completed.\"\n}\n\n# Verify Python version\ncheck_python() {\n  if ! command -v python3 >/dev/null 2>&1; then\n    error \"python3 is not installed. Please ensure base image includes Python or rerun after installing.\"\n    exit 1\n  fi\n  local ver\n  ver=\"$(python3 -c 'import sys; print(f\"{sys.version_info.major}.{sys.version_info.minor}\")')\"\n  log \"Detected Python version: $ver\"\n  # Compare versions\n  python3 - <<PYCHECK || { error \"Python $PYTHON_MIN or newer is required.\"; exit 1; }\nimport sys\nreq = tuple(map(int, \"${PYTHON_MIN}\".split(\".\")))\ncur = sys.version_info[:2]\nraise SystemExit(0 if cur >= req else 1)\nPYCHECK\n}\n\n# Ensure pip and wheel are up to date\nbootstrap_pip() {\n  log \"Bootstrapping pip and wheel...\"\n  python3 -m pip install --upgrade pip wheel setuptools\n  log \"pip, wheel, setuptools upgraded.\"\n}\n\n# Install Poetry using pip (idempotent)\ninstall_poetry() {\n  if command -v poetry >/dev/null 2>&1; then\n    local pv\n    pv=\"$(poetry --version 2>/dev/null | awk '{print $3}')\"\n    log \"Poetry already installed (version $pv).\"\n  else\n    log \"Installing Poetry...\"\n    python3 -m pip install \"poetry>=${POETRY_VERSION_MIN}\"\n    log \"Poetry installed.\"\n  fi\n\n  # Configure Poetry to use in-project virtualenv\n  poetry config virtualenvs.in-project true || true\n\n  # Reduce Poetry interactive prompts in CI/containers\n  poetry config installer.parallel true || true\n}\n\n# Create directories and set permissions\nsetup_directories() {\n  umask 022\n\n  log \"Setting up project directories and permissions...\"\n\n  mkdir -p \"$APP_HOME\"\n  mkdir -p \"$XDG_CONFIG_HOME/$APP_NAME\" \"$XDG_CACHE_HOME/$APP_NAME\"\n\n  # Optional global config in /etc for defaults\n  if [[ -w /etc ]]; then\n    if [[ ! -f /etc/proselintrc ]]; then\n      cat >/etc/proselintrc <<'JSON'\n{\n  \"checks\": {\n    // Add default global overrides here if desired.\n  }\n}\nJSON\n      # Remove comments if any (JSON does not support comments) to be safe\n      sed -i 's,//.*$,,' /etc/proselintrc || true\n    fi\n  fi\n\n  # Per-user config JSON if not present\n  local user_cfg=\"$XDG_CONFIG_HOME/$APP_NAME/config.json\"\n  if [[ ! -f \"$user_cfg\" ]]; then\n    cat >\"$user_cfg\" <<'JSON'\n{\n  \"checks\": {\n  }\n}\nJSON\n  fi\n\n  # Ensure ownership (root in Docker) and sane perms\n  chmod -R 755 \"$XDG_CONFIG_HOME/$APP_NAME\" \"$XDG_CACHE_HOME/$APP_NAME\" || true\n  log \"Directories prepared.\"\n}\n\n# Install Python project dependencies with Poetry\ninstall_python_deps() {\n  if [[ ! -f \"$APP_HOME/pyproject.toml\" ]]; then\n    warn \"pyproject.toml not found in $APP_HOME. Skipping Poetry install.\"\n    return 0\n  fi\n\n  log \"Installing Python project dependencies via Poetry...\"\n  (\n    cd \"$APP_HOME\"\n    # Only run install if virtualenv not already set up or lock changes\n    if [[ -d \".venv\" ]]; then\n      log \"Poetry virtualenv (.venv) already exists.\"\n    fi\n    poetry install --no-interaction --no-ansi\n  )\n  log \"Python dependencies installed.\"\n\n  # Export virtualenv PATH for current shell\n  if [[ -d \"$APP_HOME/.venv/bin\" ]]; then\n    export PATH=\"$APP_HOME/.venv/bin:$PATH\"\n  fi\n}\n\n# Optional: Install Ruby/Jekyll tooling to build the site\ninstall_site_tooling() {\n  if [[ \"$ENABLE_SITE\" != \"1\" ]]; then\n    log \"Site tooling installation skipped (ENABLE_SITE=0).\"\n    return 0\n  fi\n  if [[ ! -d \"$APP_HOME/site\" ]]; then\n    warn \"Site directory not found; skipping Ruby/Jekyll tooling.\"\n    return 0\n  fi\n\n  local pm; pm=\"$(detect_pkg_manager)\"\n  log \"Installing Ruby/Jekyll tooling (package manager: $pm)...\"\n\n  if command -v ruby >/dev/null 2>&1; then\n    log \"Ruby already installed: $(ruby --version)\"\n  else\n    if [[ \"$pm\" == \"apt\" ]]; then\n      apt-get update -y\n      apt-get install -y --no-install-recommends ruby-full build-essential\n    elif [[ \"$pm\" == \"apk\" ]]; then\n      apk add --no-cache ruby ruby-dev build-base\n    else\n      warn \"Unknown package manager; Ruby installation not attempted.\"\n    fi\n  fi\n\n  if command -v gem >/dev/null 2>&1; then\n    gem update --system || true\n    if ! command -v jekyll >/dev/null 2>&1; then\n      gem install jekyll --no-document\n    fi\n    if ! gem list -i bundler >/dev/null 2>&1; then\n      gem install bundler --no-document\n    fi\n    # Optional plugin from site/_config.yml\n    if ! gem list -i jekyll-sitemap >/dev/null 2>&1; then\n      gem install jekyll-sitemap --no-document\n    fi\n    log \"Ruby/Jekyll tooling installed.\"\n  else\n    warn \"gem command not available; skipping site tooling installation.\"\n  fi\n\n  # AWS creds placeholders for site deploy (optional)\n  export AWS_S3_ID=\"${AWS_S3_ID:-}\"\n  export AWS_S3_SECRET=\"${AWS_S3_SECRET:-}\"\n}\n\n# Print usage or next steps\nprint_next_steps() {\n  log \"Environment setup completed successfully.\"\n\n  if [[ -f \"$APP_HOME/pyproject.toml\" ]]; then\n    echo \"To use proselint CLI:\"\n    echo \"  export PATH=\\\"$APP_HOME/.venv/bin:\\$PATH\\\"\"\n    echo \"  proselint --version\"\n    echo \"  proselint --demo\"\n  else\n    echo \"pyproject.toml not found; ensure you're in the project root.\"\n  fi\n\n  if [[ \"$ENABLE_SITE\" == \"1\" && -d \"$APP_HOME/site\" ]]; then\n    echo \"To build the site with Jekyll:\"\n    echo \"  cd site && jekyll build\"\n  fi\n}\n\nmain() {\n  log \"Starting ${APP_NAME} environment setup in Docker...\"\n  install_system_deps\n  check_python\n  bootstrap_pip\n  install_poetry\n  setup_directories\n  install_python_deps\n  install_site_tooling\n  print_next_steps\n}\n\nmain \"$@\"",
      "additional_kwargs": {
        "refusal": null
      },
      "response_metadata": {
        "token_usage": {
          "completion_tokens": 4497,
          "prompt_tokens": 5027,
          "total_tokens": 9524,
          "completion_tokens_details": {
            "accepted_prediction_tokens": 0,
            "audio_tokens": 0,
            "reasoning_tokens": 2240,
            "rejected_prediction_tokens": 0
          },
          "prompt_tokens_details": {
            "audio_tokens": 0,
            "cached_tokens": 0
          }
        },
        "model_name": "gpt-5-2025-08-07",
        "system_fingerprint": null,
        "finish_reason": "stop",
        "logprobs": null
      },
      "type": "ai",
      "name": null,
      "id": "run--f44fed41-d9b7-4dc8-9aa6-6f9ad3eae06c-0",
      "example": false,
      "tool_calls": [],
      "invalid_tool_calls": [],
      "usage_metadata": {
        "input_tokens": 5027,
        "output_tokens": 4497,
        "total_tokens": 9524,
        "input_token_details": {
          "audio": 0,
          "cache_read": 0
        },
        "output_token_details": {
          "audio": 0,
          "reasoning": 2240
        }
      }
    }
  ],
  "env_implement_file_messages": [],
  "env_implement_execute_messages": [],
  "env_implement_command_messages": []
}